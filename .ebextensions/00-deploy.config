packages:
  yum:
    git: []
    gcc-c++: []
    make: []

option_settings:
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production
    PORT: 8080
  aws:elasticbeanstalk:container:nodejs:
    NodeCommand: "node server.js"
    NodeVersion: 18
  aws:elasticbeanstalk:environment:proxy:
    ProxyServer: nginx

files:
  "/opt/elasticbeanstalk/hooks/appdeploy/pre/50npm.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      
      # Install dependencies
      cd /tmp/deployment/application
      echo "Installing dependencies..."
      npm install --production
      
      # Build production assets
      echo "Building assets..."
      npm run build